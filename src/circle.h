#pragma once

#include <stdint.h>

#define quartercircle_length 128

const int16_t __quartercircle[quartercircle_length] = {
    0,
    13,
    25,
    38,
    50,
    63,
    75,
    88,
    100,
    113,
    125,
    138,
    150,
    163,
    175,
    187,
    200,
    212,
    224,
    237,
    249,
    261,
    273,
    285,
    297,
    309,
    321,
    333,
    345,
    357,
    369,
    380,
    392,
    403,
    415,
    426,
    438,
    449,
    460,
    472,
    483,
    494,
    505,
    516,
    526,
    537,
    548,
    558,
    569,
    579,
    590,
    600,
    610,
    620,
    630,
    640,
    650,
    659,
    669,
    678,
    688,
    697,
    706,
    715,
    724,
    733,
    742,
    750,
    759,
    767,
    775,
    784,
    792,
    799,
    807,
    815,
    822,
    830,
    837,
    844,
    851,
    858,
    865,
    872,
    878,
    885,
    891,
    897,
    903,
    909,
    915,
    920,
    926,
    931,
    936,
    941,
    946,
    951,
    955,
    960,
    964,
    968,
    972,
    976,
    980,
    983,
    987,
    990,
    993,
    996,
    999,
    1002,
    1004,
    1007,
    1009,
    1011,
    1013,
    1015,
    1016,
    1018,
    1019,
    1020,
    1021,
    1022,
    1023,
    1023,
    1023,
    1023,
};

#define __SIN(X) (__quartercircle[(X) & (quartercircle_length - 1)])
#define __COS(X) (__quartercircle[quartercircle_length - 1 - ((X) & (quartercircle_length - 1))])
#define __SECT(X) (((X) / quartercircle_length) % 4)
#define SIN(X) ( __SECT(X) == 0 ? __SIN(X) : (__SECT(X) == 1 ? __COS(X) : (__SECT(X) == 2 ? -__SIN(X) : -__COS(X))) )
#define COS(X) ( __SECT(X) == 0 ? __COS(X) : (__SECT(X) == 1 ? -__SIN(X) : (__SECT(X) == 2 ? -__COS(X) : __SIN(X))) )
#define SIN8(X) (SIN(X) >> 2)
#define COS8(X) (COS(X) >> 2)